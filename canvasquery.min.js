/*     
  Canvas Query 0.6.4
  http://canvasquery.org
  (c) 2012-2013 http://rezoner.net
  Canvas Query may be freely distributed under the MIT license.
*/

var f=window;f.requestAnimationFrame=f.requestAnimationFrame||f.webkitRequestAnimationFrame||f.mozRequestAnimationFrame||f.oRequestAnimationFrame||f.msRequestAnimationFrame||function(a){f.setTimeout(a,1E3/60)};
function j(a){if(0===arguments.length){var b=j.c(f.innerWidth,f.innerHeight);f.addEventListener("resize",function(){b.width=f.innerWidth;b.height=f.innerHeight})}else if("string"===typeof a)b=j.c(document.querySelector(a)[0]);else if("number"===typeof a)b=j.c(arguments[0],arguments[1]);else if(a instanceof Image)b=j.c(a);else if(a instanceof HTMLCanvasElement)b=a;else if(a instanceof j.b)return a;return new j.b(b)}
j.extend=function(){for(var a=1;a<arguments.length;a++)for(var b in arguments[a])arguments[0][b]=arguments[a][b];return arguments[0]};j.q=function(){for(var a=1;a<arguments.length;a++)_.extend(arguments[0],arguments[a]),arguments[a](arguments[0])};
j.extend(j,{D:{37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"escape",32:"space",33:"pageup",34:"pagedown",35:"end",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scrolllock",186:"semicolon",187:"equal",188:"comma",189:"dash",190:"period",191:"slash",192:"graveaccent",219:"openbracket",220:"backslash",221:"closebraket",
222:"singlequote"},s:function(a,b){for(var c=arguments[arguments.length-1],e="function"===typeof c,g=0,d=a.length;g<d;g++)if(null===a[g]||b&&a[g][b])e&&c(a[g]),a.splice(g--,1),d--},n:["color","value","hue","saturation"],i:{H:function(a,b){return b},m:function(a,b){a/=255;b/=255;return Math.min(255,Math.max(0,255*(128>a?2*a*b:1-2*(1-a)*(1-b))|0))},B:function(a,b){return j.i.m(b,a)},K:function(a,b){a/=255;b/=255;return j.f(255*((1-2*b)*a*a+2*b*a),0,255)},w:function(a,b){return 256*a/(255-b+1)},r:function(a,
b){return 255-256*(255-a)/(b+1)},multiply:function(a,b){return b*a/255},v:function(a,b){return j.f(256*a/(b+1),0,255)},screen:function(a,b){return 255-(255-b)*(255-a)/255},z:function(a,b){return j.f(a-b+128,0,255)},A:function(a,b){return j.f(a+b-128,0,255)},u:function(a,b){return Math.abs(a-b)},o:function(a,b){return Math.min(a+b,255)},L:function(a,b){return Math.max(a-b,0)},t:function(a,b){return Math.min(a,b)},F:function(a,b){return Math.max(a,b)},color:function(a,b){var c=j.j(a),e=j.j(b);return j.l(e[0],
e[1],c[2])},C:function(a,b){var c=j.a(a),e=j.a(b);return e[1]?j.e(e[0],c[1],c[2]):j.e(c[0],c[1],c[2])},value:function(a,b){var c=j.a(a),e=j.a(b);return j.e(c[0],c[1],e[2])},J:function(a,b){var c=j.a(a),e=j.a(b);return j.e(c[0],e[1],c[2])}},h:function(a,b,c,e){"undefined"===typeof e&&(e=1);a=j(a);b=j(b);var g=b.d,d=a.d.getImageData(0,0,a.canvas.width,a.canvas.height);b=g.getImageData(0,0,b.canvas.width,b.canvas.height);d=d.data;b=b.data;var g=this.createImageData(a.canvas.width,a.canvas.height),h=
g.data,k=j.i[c];if(-1!==j.n.indexOf(c)){c=0;for(var l=d.length;c<l;c+=4){var p=k([d[c+0],d[c+1],d[c+2]],[b[c+0],b[c+1],b[c+2]]);h[c+0]=d[c+0]+(p[0]-d[c+0])*e;h[c+1]=d[c+1]+(p[1]-d[c+1])*e;h[c+2]=d[c+2]+(p[2]-d[c+2])*e;h[c+3]=d[c+3]}}else{c=0;for(l=d.length;c<l;c+=4){var p=k(d[c+0],b[c+0]),s=k(d[c+1],b[c+1]),t=k(d[c+2],b[c+2]);h[c+0]=d[c+0]+(p-d[c+0])*e;h[c+1]=d[c+1]+(s-d[c+1])*e;h[c+2]=d[c+2]+(t-d[c+2])*e;h[c+3]=d[c+3]}}a.d.putImageData(g,0,0);return a},M:function(a,b,c){a<b?a=c+(a-b):a>c&&(a=b+(a-
c));return a},f:function(a,b,c){return a<b?b:a>c?c:a},G:function(a,b,c){return a+(b-a)*c},k:function(a){return["0x"+a[1]+a[2]|0,"0x"+a[3]+a[4]|0,"0x"+a[5]+a[6]|0]},I:function(a,b,c){return"#"+(16777216+(a<<16)+(b<<8)+c).toString(16).slice(1,7)},j:function(a,b,c){a instanceof Array&&(c=a[2],b=a[1],a=a[0]);a/=255;b/=255;c/=255;var e=Math.max(a,b,c),g=Math.min(a,b,c),d,h=(e+g)/2;if(e==g)d=g=0;else{var k=e-g,g=0.5<h?k/(2-e-g):k/(e+g);switch(e){case a:d=(b-c)/k+(b<c?6:0);break;case b:d=(c-a)/k+2;break;
case c:d=(a-b)/k+4}d/=6}return[d,g,h]},l:function(a,b,c){if(0==b)c=b=a=c;else{var e=function(a,b,c){0>c&&(c+=1);1<c&&(c-=1);return c<1/6?a+6*(b-a)*c:0.5>c?b:c<2/3?a+6*(b-a)*(2/3-c):a},g=0.5>c?c*(1+b):c+b-c*b,d=2*c-g;c=e(d,g,a+1/3);b=e(d,g,a);a=e(d,g,a-1/3)}return[255*c|0,255*b|0,255*a|0]},a:function(a,b,c){a instanceof Array&&(c=a[2],b=a[1],a=a[0]);a/=255;b/=255;c/=255;var e=Math.max(a,b,c),g=Math.min(a,b,c),d,h=e-g;if(e==g)d=0;else{switch(e){case a:d=(b-c)/h+(b<c?6:0);break;case b:d=(c-a)/h+2;break;
case c:d=(a-b)/h+4}d/=6}return[d,0==e?0:h/e,e]},e:function(a,b,c){var e,g,d,h=Math.floor(6*a),k=6*a-h;a=c*(1-b);var l=c*(1-k*b);b=c*(1-(1-k)*b);switch(h%6){case 0:e=c;g=b;d=a;break;case 1:e=l;g=c;d=a;break;case 2:e=a;g=c;d=b;break;case 3:e=a;g=l;d=c;break;case 4:e=b;g=a;d=c;break;case 5:e=c,g=a,d=l}return[255*e,255*g,255*d]},color:function(){var a=new j.g;a.parse(arguments);return a},c:function(a,b){var c=document.createElement("Canvas");a instanceof Image?(c.width=a.width,c.height=a.height,c.getContext("2d").drawImage(a,
0,0)):(c.width=a,c.height=b);return c},createImageData:function(a,b){return document.createElement("Canvas").getContext("2d").createImageData(a,b)}});j.b=function(a){this.d=a.getContext("2d");this.canvas=a};j.b.prototype={h:function(a,b,c){if("string"===typeof a){var e=a;a=j(j.c(this.canvas.width,this.canvas.height));a.fillStyle(e).fillRect(0,0,this.canvas.width,this.canvas.height)}j.h(this,a,b,c);return this},fillStyle:function(a){this.d.fillStyle=a;return this}};
for(var m="arc arcTo beginPath bezierCurveTo clearRect clip closePath createImageData createLinearGradient createRadialGradient createPattern drawFocusRing drawImage fill fillRect fillText getImageData isPointInPath lineTo measureText moveTo putImageData quadraticCurveTo rect restore rotate save scale setTransform stroke strokeRect strokeText transform translate".split(" "),n=0;n<m.length;n++){var q=m[n];j.b.prototype[q]=Function("this.context."+q+".apply(this.context, arguments); return this;")}
for(var r="canvas fillStyle font globalAlpha globalCompositeOperation lineCap lineJoin lineWidth miterLimit shadowOffsetX shadowOffsetY shadowBlur shadowColor strokeStyle textAlign textBaseline".split(" "),n=0;n<r.length;n++)q=r[n],j.b.prototype[q]=Function("if(arguments.length) { this.context."+q+" = arguments[0]; return this; } else { return this.context."+q+"; }");j.g=function(){arguments.length&&this.parse(arguments)};
j.g.prototype={parse:function(a){if("string"===typeof a[0]){var b=j.k(a[0]);this[0]=b[0];this[1]=b[1];this[2]=b[2];this[3]="undefined"===typeof a[1]?1:a[1]}else this[0]=a[0],this[1]=a[1],this[2]=a[2],this[3]="undefined"===typeof a[3]?1:a[3]}};f.cq=f.CanvasQuery=j;"function"===typeof define&&define.p&&define([],function(){return j});